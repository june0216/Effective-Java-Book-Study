# 스택 추적

- 프로그램 실패시 자바 시스템은 그 예외의 스택 추적(stack trace) 정보를 자동으로 출력
- 스택추적 : 예외 객체의 toString 메서드를 호출해 얻는 문자열
- 스택추적이 얻을 수 있는 유일한 정보이므로 실패 원인에 관한 정보를 최대한 많이 담아야 한다.
- 실패 순간의 상황을 정확히 파악하려면 발생 예외에 관여한 **모든 매개변수**와 **필드의 값**을 실패 메시지에 담아야한다.
    - ex) outOfIndex의 경우 → 범위의 최솟값, 최댓값, 그리고 범위를 벗어났다는 인덱스의 값을 담아야 한다.
    - 장황하게 기록할 필요 x → 소스코드에서 얻을 수 있는 정보는 담지 말자(어차피 소스코드를 보게 되고 그거 보면 되니까)
    - **예외 상세 메시지**(실패 원인파악에 필요한 정보 중요)와 최종 사용자에게 보여줄 **오류 메시지**(가독성 중요)를 혼동하면 안된다.
        - 예외 상세 메시지
            - ⇒ (가독성 < 담긴 내용을 자세히) 최종 사용자에게 자세하게 알려주어야 함
        - 오류 메시지
            - ⇒ (가독성 > 담긴 내용을 자세히) 읽는 사람이 프로그래머이기 때문에 자세할 필요 없음, 가독성이 더 중요함

## 예시

```java
/**
 * IndexOutOfBoundsException을 생성한다.
 *
 * @param lowerBound 인덱스의 최솟값
 * @param upperBound 인덱스의 최댓값 + 1
 * @param index 인덱스의 실젯값
 */
public IndexOutOfBoundsException(int lowerBound, int upperBound, int index) {
   // 실패를 포착하는 상세 메시지를 생성한다.
   super(String.format("최솟값: %d, 최댓값: %d, 인덱스: %d", lowerBound, upperBound, index));

   // 프로그램에서 이용할 수 있도록 실패 정보를 저장해둔다.
   this.lowerBound = lowerBound;
   this.upperBoudn = upperBound;
   this.index = index;
}
```

- 다음과 같이 범위의 최소, 최대, 범위를 벗어난 인덱스등 실패 원인과 관련된 모든 정보를 담아라
- 필요 정보를 예외 생성자로 받아 생성해놓는 것도 하나의 방법이다

## 접근자 메서드를 제공하자

1. **예외는 실패와 관련된 정보를 얻을 수 있는 접근자 메서드를 적절히 제공하면 좋다.**

   ex) lowerBound, upperBound, index

   이는 예외 객체가 발생한 문제에 대한 상세한 정보를 제공하는 메서드를 가지고 있으면, 예외 처리 코드가 이 정보를 사용하여 문제의 원인을 더 잘 이해하고 적절히 대응할 수 있다는 의미입니다.

2. **접근자 메서드는 예외 상황 복구에 유용할 수 있으므로 비검사 예외보다 검사 예외에 더 적합할 것이다.**

   검사 예외(Checked Exception)는 컴파일러가 처리를 강제하는 예외로, 개발자가 이를 명시적으로 처리하도록 함으로써 예외 발생 시 복구 로직을 구현할 수 있습니다. 반면, 비검사 예외(Unchecked Exception)는 프로그램의 잘못된 동작으로 인해 발생하는 경우가 많아 프로그램이 복구할 수 있는 상황이 덜하므로 접근자 메서드가 덜 필요할 수 있습니다. 그럼에도 불구하고, 비검사 예외에도 접근자 메서드를 제공하면 예외 처리 코드에서 유용한 정보를 얻을 수 있습니다.

3. **기본적으로 toString이 반환한 값에 포함된 정보를 얻어올 수 있는 API를 제공하자 하는 원칙에 따라 비검사 예외라도 상세정보를 알 수 있게 접근자 메서드를 제공하는 것도 나쁘지 않을 것이다.**

   예외 객체의 toString 메서드는 일반적으로 예외의 이름과 메시지, 그리고 콜스택을 문자열로 반환합니다. 이 원칙은 toString 메서드가 반환하는 모든 정보를 프로그래밍적으로 접근 가능하게 해야 한다는 것을 의미합니다. 즉, 예외의 메시지나 스택 트레이스 같은 정보를 가져올 수 있는 접근자 메서드를 제공해야 한다는 것입니다. 이렇게 하면 예외 상황을 로그로 기록하거나 분석하는 데에 유용하게 사용할 수 있습니다.